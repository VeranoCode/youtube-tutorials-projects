{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/masynctech/Desktop/real-estate/app/properties/%5Bid%5D/page.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\nexport default function PropertyDetailsClient({ initialProperty }) {\n  const router = useRouter();\n  const params = useParams();\n  const { user } = useAuth();\n  const [property, setProperty] = useState(initialProperty);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n  useEffect(() => {\n    if (params.id && !initialProperty) {\n      fetchProperty();\n    }\n  }, [params.id]);\n\n  const fetchProperty = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const res = await fetch(`/api/properties/${params.id}`);\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.message || 'Failed to fetch property');\n      }\n\n      if (!data.property) {\n        throw new Error('Property not found');\n      }\n\n      setProperty(data.property);\n    } catch (error) {\n      console.error('Error fetching property:', error);\n      setError(error.message || 'Error fetching property');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this property?')) {\n      return;\n    }\n\n    try {\n      const res = await fetch(`/api/properties/${params.id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.message || 'Failed to delete property');\n      }\n\n      router.push('/properties');\n    } catch (error) {\n      console.error('Error deleting property:', error);\n      setError(error.message || 'Error deleting property');\n    }\n  };\n\n  const nextImage = () => {\n    if (property?.images?.length > 1) {\n      setCurrentImageIndex((prev) => \n        prev === property.images.length - 1 ? 0 : prev + 1\n      );\n    }\n  };\n\n  const prevImage = () => {\n    if (property?.images?.length > 1) {\n      setCurrentImageIndex((prev) => \n        prev === 0 ? property.images.length - 1 : prev - 1\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"text-center\">Loading property details...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"text-center text-red-500\">{error}</div>\n      </div>\n    );\n  }\n\n  if (!property) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"text-center\">Property not found</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Image Carousel */}\n      <div className=\"relative mb-8 h-[500px] bg-gray-200 rounded-lg overflow-hidden\">\n        {property.images && property.images.length > 0 ? (\n          <>\n            <Image\n              src={property.images[currentImageIndex]}\n              alt={`Property image ${currentImageIndex + 1}`}\n              fill\n              className=\"object-cover\"\n              priority={currentImageIndex === 0}\n            />\n            {property.images.length > 1 && (\n              <>\n                <button\n                  onClick={prevImage}\n                  className=\"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75\"\n                >\n                  ←\n                </button>\n                <button\n                  onClick={nextImage}\n                  className=\"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75\"\n                >\n                  →\n                </button>\n                <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2\">\n                  {property.images.map((_, index) => (\n                    <button\n                      key={index}\n                      onClick={() => setCurrentImageIndex(index)}\n                      className={`w-3 h-3 rounded-full ${\n                        currentImageIndex === index ? 'bg-white' : 'bg-white/50'\n                      }`}\n                    />\n                  ))}\n                </div>\n              </>\n            )}\n          </>\n        ) : (\n          <div className=\"flex items-center justify-center h-full\">\n            <p>No images available</p>\n          </div>\n        )}\n      </div>\n\n      {/* Property Details */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n        <div className=\"md:col-span-2\">\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <div className=\"flex justify-between items-start mb-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold mb-2\">{property.title}</h1>\n                <p className=\"text-gray-600 text-xl mb-2\">{property.location}</p>\n                <p className=\"text-2xl font-bold text-blue-600\">\n                  ${Number(property.price).toLocaleString()}\n                </p>\n              </div>\n              {user && user._id === property.owner._id && (\n                <div className=\"flex space-x-2\">\n                  <Link\n                    href={`/properties/edit/${property._id}`}\n                    className=\"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600\"\n                  >\n                    Edit\n                  </Link>\n                  <button\n                    onClick={handleDelete}\n                    className=\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              )}\n            </div>\n\n            <div className=\"mb-6\">\n              <h2 className=\"text-xl font-semibold mb-2\">Description</h2>\n              <p className=\"text-gray-700\">{property.description}</p>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4 mb-6\">\n              <div>\n                <h2 className=\"text-xl font-semibold mb-2\">Details</h2>\n                <ul className=\"space-y-2\">\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Property Type:</span>\n                    {property.propertyType}\n                  </li>\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Status:</span>\n                    {property.status}\n                  </li>\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Area:</span>\n                    {property.features?.area} sq ft\n                  </li>\n                </ul>\n              </div>\n              <div>\n                <h2 className=\"text-xl font-semibold mb-2\">Features</h2>\n                <ul className=\"space-y-2\">\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Bedrooms:</span>\n                    {property.features?.bedrooms}\n                  </li>\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Bathrooms:</span>\n                    {property.features?.bathrooms}\n                  </li>\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Parking:</span>\n                    {property.features?.parking ? 'Yes' : 'No'}\n                  </li>\n                  <li className=\"flex items-center\">\n                    <span className=\"font-medium mr-2\">Furnished:</span>\n                    {property.features?.furnished ? 'Yes' : 'No'}\n                  </li>\n                </ul>\n              </div>\n            </div>\n\n            <div>\n              <h2 className=\"text-xl font-semibold mb-2\">Location</h2>\n              <div className=\"bg-gray-100 p-4 rounded-lg\">\n                <p className=\"mb-1\">{property.address?.street}</p>\n                <p className=\"mb-1\">\n                  {property.address?.city}, {property.address?.state} {property.address?.zipCode}\n                </p>\n                <p>{property.address?.country}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Contact Section */}\n        <div className=\"md:col-span-1\">\n          <div className=\"bg-white rounded-lg shadow-md p-6 sticky top-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Contact Agent</h2>\n            {user ? (\n              <form className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Message\n                  </label>\n                  <textarea\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                    rows=\"4\"\n                    placeholder=\"I'm interested in this property...\"\n                  ></textarea>\n                </div>\n                <button\n                  type=\"submit\"\n                  className=\"w-full bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600\"\n                >\n                  Send Message\n                </button>\n              </form>\n            ) : (\n              <div className=\"text-center\">\n                <p className=\"mb-4\">Please login to contact the agent</p>\n                <Link\n                  href=\"/login\"\n                  className=\"block w-full bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600\"\n                >\n                  Login\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 690, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}